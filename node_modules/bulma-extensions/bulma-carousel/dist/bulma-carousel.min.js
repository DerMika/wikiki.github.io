var bulmaCarousel=function(){'use strict';class a{constructor(a){if(this._clickEvent='ontouchstart'in window?'touchstart':'click',this.element='string'==typeof a?document.querySelector(a):a,!this.element)throw new Error('An invalid selector or non-DOM node has been provided.');this.init()}init(){this.items=Array.from(this.element.querySelectorAll('.carousel-item')),this.items.forEach((a)=>{let b=a.querySelector('img');b.setAttribute('draggable',!1)}),this.computedStyle=window.getComputedStyle(this.element),this.previousControl=this.element.querySelector('.carousel-nav-left'),this.nextControl=this.element.querySelector('.carousel-nav-right'),this._bindEvents(),this._initOrder(),this.element.dataset._autoPlay&&'true'==this.element.dataset._autoPlay&&this._autoPlay(this.element.dataset.delay||5e3)}_bindEvents(){this.previousControl&&this.previousControl.addEventListener(this._clickEvent,(a)=>{a.preventDefault(),this._slide('previous'),this._autoPlayInterval&&(clearInterval(this._autoPlayInterval),this._autoPlay(this.element.dataset.delay||5e3))},!1),this.nextControl&&this.nextControl.addEventListener(this._clickEvent,(a)=>{a.preventDefault(),this._slide('next'),this._autoPlayInterval&&(clearInterval(this._autoPlayInterval),this._autoPlay(this.element.dataset.delay||5e3))},!1),this.element.addEventListener('touchstart',(a)=>{this._swipeStart(a)}),this.element.addEventListener('mousedown',(a)=>{this._swipeStart(a)}),this.element.addEventListener('touchend',(a)=>{this._swipeEnd(a)}),this.element.addEventListener('mouseup',(a)=>{this._swipeEnd(a)})}_initOrder(){const a=this.element.querySelector('.carousel-item.is-active'),b=this.items.indexOf(a);b?this.items.push(this.items.splice(0,b)):this.items.unshift(this.items.pop()),this._setOrder()}_setOrder(){this.items.forEach((a,b)=>{a.style['z-index']=1===b?'1':'0',a.style.order=b})}_swipeStart(a){this._touch={start:{x:a.clientX,y:a.clientY},end:{x:a.clientX,y:a.clientY}}}_swipeEnd(a){this._touch.end={x:a.clientX,y:a.clientY},this._handleGesture()}_handleGesture(){const a={horizontal:(this._touch.end.x-this._touch.start.x)/parseInt(this.computedStyle.getPropertyValue('width')),vertical:(this._touch.end.y-this._touch.start.y)/parseInt(this.computedStyle.getPropertyValue('height'))};a.horizontal>a.vertical&&.25<a.horizontal&&this._slide('previous'),a.horizontal<a.vertical&&-.25>a.horizontal&&this._slide('next')}_slide(a='next'){if(this.items.length){const b=this.element.querySelector('.carousel-item.is-active');let c;b.classList.remove('is-active'),'previous'===a?(this.items.unshift(this.items.pop()),this.element.classList.add('is-reversing')):(this.items.push(this.items.shift()),this.element.classList.remove('is-reversing')),c=1<=this.items.length?this.items[1]:this.items[0],c.classList.add('is-active'),this._setOrder(),this.element.classList.toggle('carousel-animated'),setTimeout(()=>{this.element.classList.toggle('carousel-animated')},50)}}_autoPlay(a=5e3){this._autoPlayInterval=setInterval(()=>{this._slide('next')},a)}}return document.addEventListener('DOMContentLoaded',function(){var b=document.querySelectorAll('.carousel, .hero-carousel');[].forEach.call(b,function(b){new a(b)})}),a}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFBUSxXQUFFLENBQzVDLEFBQUksQUFBUSxBQUFDLEFBQVEsQUFBQyxBQUFDLFFBQ3hCLEFBQUMsQUFBQyxFQUNKLEFBQUMsQUFBQyIsImZpbGUiOiJidWxtYS1jYXJvdXNlbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJvdXNlbCB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgIC8vIERldGVybWluZSBjbGljayBldmVudCBkZXBlbmRpbmcgb24gaWYgd2UgYXJlIG9uIFRvdWNoIGRldmljZSBvciBub3RcclxuICAgIHRoaXMuX2NsaWNrRXZlbnQgPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSA/ICd0b3VjaHN0YXJ0JyA6ICdjbGljayc7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50ID0gdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIDogc2VsZWN0b3I7XHJcbiAgICAvLyBBbiBpbnZhbGlkIHNlbGVjdG9yIG9yIG5vbi1ET00gbm9kZSBoYXMgYmVlbiBwcm92aWRlZC5cclxuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQW4gaW52YWxpZCBzZWxlY3RvciBvciBub24tRE9NIG5vZGUgaGFzIGJlZW4gcHJvdmlkZWQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWF0ZSBwbHVnaW5cclxuICAgKiBAbWV0aG9kIGluaXRcclxuICAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICAqL1xyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLml0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2VsLWl0ZW0nKSk7XHJcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgbGV0IGltZyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW1nJyk7XHJcbiAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsIGZhbHNlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5jb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50KTtcclxuXHJcbiAgICB0aGlzLnByZXZpb3VzQ29udHJvbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWwtbmF2LWxlZnQnKTtcclxuICAgIHRoaXMubmV4dENvbnRyb2wgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLW5hdi1yaWdodCcpO1xyXG5cclxuICAgIHRoaXMuX2JpbmRFdmVudHMoKTtcclxuICAgIHRoaXMuX2luaXRPcmRlcigpO1xyXG5cclxuICAgIGlmICh0aGlzLmVsZW1lbnQuZGF0YXNldC5fYXV0b1BsYXkgJiYgdGhpcy5lbGVtZW50LmRhdGFzZXQuX2F1dG9QbGF5ID09ICd0cnVlJykge1xyXG4gICAgICB0aGlzLl9hdXRvUGxheSh0aGlzLmVsZW1lbnQuZGF0YXNldC5kZWxheSB8fCA1MDAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEJpbmQgYWxsIGV2ZW50c1xyXG4gICAqIEBtZXRob2QgX2JpbmRFdmVudHNcclxuICAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICAqL1xyXG4gIF9iaW5kRXZlbnRzKCkge1xyXG4gICAgaWYgKHRoaXMucHJldmlvdXNDb250cm9sKSB7XHJcbiAgICAgIHRoaXMucHJldmlvdXNDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fY2xpY2tFdmVudCwgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5fc2xpZGUoJ3ByZXZpb3VzJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2F1dG9QbGF5SW50ZXJ2YWwpIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fYXV0b1BsYXlJbnRlcnZhbCk7XHJcbiAgICAgICAgICB0aGlzLl9hdXRvUGxheSh0aGlzLmVsZW1lbnQuZGF0YXNldC5kZWxheSB8fCA1MDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm5leHRDb250cm9sKSB7XHJcbiAgICAgIHRoaXMubmV4dENvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9jbGlja0V2ZW50LCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9zbGlkZSgnbmV4dCcpO1xyXG4gICAgICAgIGlmICh0aGlzLl9hdXRvUGxheUludGVydmFsKSB7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2F1dG9QbGF5SW50ZXJ2YWwpO1xyXG4gICAgICAgICAgdGhpcy5fYXV0b1BsYXkodGhpcy5lbGVtZW50LmRhdGFzZXQuZGVsYXkgfHwgNTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmluZCBzd2lwZSBldmVudHNcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHtcclxuICAgICAgdGhpcy5fc3dpcGVTdGFydChlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX3N3aXBlU3RhcnQoZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9zd2lwZUVuZChlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9zd2lwZUVuZChlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhdGUgc2xpZGVzIG9yZGVyXHJcbiAgICogQG1ldGhvZCBfaW5pdE9yZGVyXHJcbiAgICogQHJldHVybiB7dm9pZH1cclxuICAgKi9cclxuICBfaW5pdE9yZGVyKCkge1xyXG4gICAgY29uc3QgY3VycmVudEFjdGl2ZUl0ZW0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLWl0ZW0uaXMtYWN0aXZlJyk7XHJcbiAgICBjb25zdCBjdXJyZW50QWN0aXZlSXRlbVBvcyA9IHRoaXMuaXRlbXMuaW5kZXhPZihjdXJyZW50QWN0aXZlSXRlbSk7XHJcbiAgICBjb25zdCBsZW5ndGggPSB0aGlzLml0ZW1zLmxlbmd0aDtcclxuXHJcbiAgICBpZiAoY3VycmVudEFjdGl2ZUl0ZW1Qb3MpIHtcclxuICAgICAgdGhpcy5pdGVtcy5wdXNoKHRoaXMuaXRlbXMuc3BsaWNlKDAsIGN1cnJlbnRBY3RpdmVJdGVtUG9zKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLml0ZW1zLnVuc2hpZnQodGhpcy5pdGVtcy5wb3AoKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zZXRPcmRlcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGVhY2ggc2xpZGUgb3JkZXJcclxuICAgKiBAbWV0aG9kIF9zZXRPcmRlclxyXG4gICAqL1xyXG4gIF9zZXRPcmRlcigpIHtcclxuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgaWYgKGluZGV4ICE9PSAxKSB7XHJcbiAgICAgICAgaXRlbS5zdHlsZVsnei1pbmRleCddID0gJzAnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGl0ZW0uc3R5bGVbJ3otaW5kZXgnXSA9ICcxJztcclxuICAgICAgfVxyXG4gICAgICBpdGVtLnN0eWxlLm9yZGVyID0gaW5kZXg7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmUgY3VycmVudCBwb3NpdGlvbiBvbiBzdGFydCBzd2lwaW5nXHJcbiAgICogQG1ldGhvZCBfc3dpcGVTdGFydFxyXG4gICAqIEBwYXJhbSAge0V2ZW50fSAgICBlIFN3aXBlIGV2ZW50XHJcbiAgICogQHJldHVybiB7dm9pZH1cclxuICAgKi9cclxuICBfc3dpcGVTdGFydChlKSB7XHJcbiAgICB0aGlzLl90b3VjaCA9IHtcclxuICAgICAgc3RhcnQ6IHtcclxuICAgICAgICB4OiBlLmNsaWVudFgsXHJcbiAgICAgICAgeTogZS5jbGllbnRZXHJcbiAgICAgIH0sXHJcbiAgICAgIGVuZDoge1xyXG4gICAgICAgIHg6IGUuY2xpZW50WCxcclxuICAgICAgICB5OiBlLmNsaWVudFlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZSBjdXJyZW50IHBvc2l0aW9uIG9uIGVuZCBzd2lwaW5nXHJcbiAgICogQG1ldGhvZCBfc3dpcGVFbmRcclxuICAgKiBAcGFyYW0gIHtFdmVudH0gIGUgc3dpcGUgZXZlbnRcclxuICAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICAqL1xyXG4gIF9zd2lwZUVuZChlKSB7XHJcbiAgICB0aGlzLl90b3VjaC5lbmQgPSB7XHJcbiAgICAgIHg6IGUuY2xpZW50WCxcclxuICAgICAgeTogZS5jbGllbnRZXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faGFuZGxlR2VzdHVyZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZnkgdGhlIGdlc3R1cmVhbmQgc2xpZGUgaWYgbmVjZXNzYXJ5XHJcbiAgICogQG1ldGhvZCBfaGFuZGxlR2VzdHVyZVxyXG4gICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgICovXHJcbiAgX2hhbmRsZUdlc3R1cmUoKSB7XHJcbiAgICBjb25zdCByYXRpbyA9IHtcclxuICAgICAgaG9yaXpvbnRhbDogKHRoaXMuX3RvdWNoLmVuZC54IC0gdGhpcy5fdG91Y2guc3RhcnQueCkgLyBwYXJzZUludCh0aGlzLmNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKSksXHJcbiAgICAgIHZlcnRpY2FsOiAodGhpcy5fdG91Y2guZW5kLnkgLSB0aGlzLl90b3VjaC5zdGFydC55KSAvIHBhcnNlSW50KHRoaXMuY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdoZWlnaHQnKSlcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHJhdGlvLmhvcml6b250YWwgPiByYXRpby52ZXJ0aWNhbCAmJiByYXRpby5ob3Jpem9udGFsID4gMC4yNSkge1xyXG4gICAgICB0aGlzLl9zbGlkZSgncHJldmlvdXMnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmF0aW8uaG9yaXpvbnRhbCA8IHJhdGlvLnZlcnRpY2FsICYmIHJhdGlvLmhvcml6b250YWwgPCAtMC4yNSkge1xyXG4gICAgICB0aGlzLl9zbGlkZSgnbmV4dCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHNsaWRlcyB0byBkaXNwbGF5IHRoZSB3YW50ZWQgb25lXHJcbiAgICogQG1ldGhvZCBfc2xpZGVcclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtkaXJlY3Rpb249J25leHQnXSBEaXJlY3Rpb24gaW4gd2hpY2ggc2xpZGUgbmVlZHMgdG8gbW92ZVxyXG4gICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgICovXHJcbiAgX3NsaWRlKGRpcmVjdGlvbiA9ICduZXh0Jykge1xyXG4gICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVJdGVtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC1pdGVtLmlzLWFjdGl2ZScpO1xyXG4gICAgICBsZXQgbmV3QWN0aXZlSXRlbTtcclxuXHJcbiAgICAgIGN1cnJlbnRBY3RpdmVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG5cclxuICAgICAgLy8gaW5pdGlhbGl6ZSBkaXJlY3Rpb24gdG8gY2hhbmdlIG9yZGVyXHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdwcmV2aW91cycpIHtcclxuICAgICAgICAvLyBSZW9yZGVyIGl0ZW1zXHJcbiAgICAgICAgdGhpcy5pdGVtcy51bnNoaWZ0KHRoaXMuaXRlbXMucG9wKCkpO1xyXG4gICAgICAgIC8vIGFkZCByZXZlcnNlIGNsYXNzXHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLXJldmVyc2luZycpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFJlb3JkZXIgaXRlbXNcclxuICAgICAgICB0aGlzLml0ZW1zLnB1c2godGhpcy5pdGVtcy5zaGlmdCgpKTtcclxuICAgICAgICAvLyByZV9zbGlkZSByZXZlcnNlIGNsYXNzXHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXJldmVyc2luZycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgIG5ld0FjdGl2ZUl0ZW0gPSB0aGlzLml0ZW1zWzFdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5ld0FjdGl2ZUl0ZW0gPSB0aGlzLml0ZW1zWzBdO1xyXG4gICAgICB9XHJcbiAgICAgIG5ld0FjdGl2ZUl0ZW0uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICAgIHRoaXMuX3NldE9yZGVyKCk7XHJcblxyXG4gICAgICAvLyBEaXNhYmxlIHRyYW5zaXRpb24gdG8gaW5zdGFudCBjaGFuZ2Ugb3JkZXJcclxuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2Nhcm91c2VsLWFuaW1hdGVkJyk7XHJcbiAgICAgIC8vIEVuYWJsZSB0cmFuc2l0aW9uIHRvIGFuaW1hdGUgb3JkZXIgMSB0byBvcmRlciAyXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJvdXNlbC1hbmltYXRlZCcpO1xyXG4gICAgICB9LCA1MCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWF0ZSBhdXRvcGxheSBzeXN0ZW1cclxuICAgKiBAbWV0aG9kIF9hdXRvUGxheVxyXG4gICAqIEBwYXJhbSAge051bWJlcn0gIFtkZWxheT01MDAwXSBEZWxheSBiZXR3ZWVuIHNsaWRlcyBpbiBtaWxsaXNlY29uZHNcclxuICAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICAqL1xyXG4gIF9hdXRvUGxheShkZWxheSA9IDUwMDApIHtcclxuICAgIHRoaXMuX2F1dG9QbGF5SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuX3NsaWRlKCduZXh0Jyk7XHJcbiAgICB9LCBkZWxheSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhdGUgYWxsIERPTSBlbGVtZW50IGNvbnRhaW5pbmcgY2Fyb3VzZWwgY2xhc3NcclxuICogQG1ldGhvZFxyXG4gKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICB2YXIgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2VsLCAuaGVyby1jYXJvdXNlbCcpO1xyXG4gIFtdLmZvckVhY2guY2FsbChjYXJvdXNlbHMsIGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcbiAgICBuZXcgQ2Fyb3VzZWwoY2Fyb3VzZWwpO1xyXG4gIH0pO1xyXG59KTtcclxuIl19
