"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var datepicker_langs={en:{weekStart:1,previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},fr:{weekStart:1,previousMonth:"Mois précédent",nextMonth:"Mois suivant",months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Auo","Sep","Oct","Nov","Déc"],weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},de:{weekStart:1,previousMonth:"Vorheriger Monat",nextMonth:"Nächster Monat",months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Febr","März","Apr","Mai","Juni","Juli","Aug","Sept","Okt","Nov","Dez"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],weekdaysShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},tr:{weekStart:1,previousMonth:"Önceki Ay",nextMonth:"Gelecek Ay",months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthsShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],weekdays:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],weekdaysShort:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"]},it:{weekStart:1,previousMonth:"Mese Precedente",nextMonth:"Prossimo Mese",months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],weekdays:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],weekdaysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},th:{weekStart:1,previousMonth:"เดือนก่อนหน้า",nextMonth:"เดือนถัดไป",months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthsShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],weekdays:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],weekdaysShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},hr:{weekStart:2,previousMonth:"Prošli mjesec",nextMonth:"Slijedeći mjesec",months:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac"],monthsShort:["sij","velj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro"],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],weekdaysShort:["ned","pon","uto","sri","čet","pet","sub"]},sr:{weekStart:2,previousMonth:"Prošli mesec",nextMonth:"Sledeći mesec",months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned","pon","uto","sre","čet","pet","sub"]},"zh-cn":{weekStart:1,previousMonth:"上个月",nextMonth:"下个月",months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],weekdays:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],weekdaysShort:["周日","周一","周二","周三","周四","周五","周六"]},es:{weekStart:1,previousMonth:"Mes anterior",nextMonth:"Próximo mes",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdays:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]}};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},writable:!0,configurable:!0});var DatePicker=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,e),this._clickEvent="ontouchstart"in window?"touchstart":"click",this.element="string"==typeof t?document.querySelector(t):t,!this.element)throw new Error("An invalid selector or non-DOM node has been provided.");this.options=Object.assign({},{startDate:new Date,dateFormat:"yyyy-mm-dd",lang:"en",overlay:!1,closeOnOverlayClick:!0,closeOnSelect:!0,onSelect:null,onOpen:null,onClose:null,onRender:null},a),this._init()}return _createClass(e,[{key:"_init",value:function(){return this._id="datePicker"+(new Date).getTime()+Math.floor(Math.random()*Math.floor(9999)),this.lang=void 0!==datepicker_langs[this.lang]?this.lang:"en",this.element.value&&(this.options.startDate=new Date(this.element.value)),this.options.startDate=new Date(this._getFormatedDate(this.options.startDate,this.options.dateFormat)),this.month=this.options.startDate.getMonth(),this.year=this.options.startDate.getFullYear(),this.day=this.options.startDate.getDate(),this.open=!1,this._build(),this._bindEvents(),this}},{key:"_build",value:function(){var e="\n      <div id='".concat(this._id,"' class=\"datepicker ").concat(this.options.overlay?"modal":"",'">\n        ').concat(this.options.overlay?'<div class="modal-background"></div>':"",'\n        <div class="calendar">\n          <div class="calendar-nav">\n            <div class="calendar-nav-month">\n              <div class="calendar-nav-previous-month">\n                <button class="button is-small is-text">\n                  <i class="fa fa-chevron-left"></i>\n                </button>\n              </div>\n              <div class="calendar-month">').concat(datepicker_langs[this.options.lang].months[this.month],'</div>\n              <div class="calendar-nav-next-month">\n                <button class="button is-small is-text">\n                  <i class="fa fa-chevron-right"></i>\n                </button>\n              </div>\n            </div>\n            <div class="calendar-nav-day">\n              <div class="calendar-day">').concat(this.day,'</div>\n            </div>\n            <div class="calendar-nav-year">\n              <div class="calendar-nav-previous-year">\n                <button class="button is-small is-text">\n                  <i class="fa fa-chevron-left"></i>\n                </button>\n              </div>\n              <div class="calendar-year">').concat(this.year,'</div>\n              <div class="calendar-nav-next-year">\n                <button class="button is-small is-text">\n                  <i class="fa fa-chevron-right"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div class="calendar-container">\n            <div class="calendar-header">\n              <div class="calendar-date">').concat(this._getDayName(0,!0),'</div>\n              <div class="calendar-date">').concat(this._getDayName(1,!0),'</div>\n              <div class="calendar-date">').concat(this._getDayName(2,!0),'</div>\n              <div class="calendar-date">').concat(this._getDayName(3,!0),'</div>\n              <div class="calendar-date">').concat(this._getDayName(4,!0),'</div>\n              <div class="calendar-date">').concat(this._getDayName(5,!0),'</div>\n              <div class="calendar-date">').concat(this._getDayName(6,!0),'</div>\n            </div>\n            <div class="calendar-body"></div>\n          </div>\n        </div>\n      </div>\n    ');document.body.insertAdjacentHTML("beforeend",e),this.datePickerContainer=document.getElementById(this._id),this.datePickerCalendar=this.datePickerContainer.querySelector(".calendar"),this.options.overlay&&(this.datePickerOverlay=this.datePickerContainer.querySelector(".modal-background"),this.datePickerCloseButton=this.datePickerContainer.querySelector(".modal-close")),this.datePickerCalendarNav=this.datePickerCalendar.querySelector(".calendar-nav"),this.datePickerCalendarNavMonth=this.datePickerCalendar.querySelector(".calendar-month"),this.datePickerCalendarNavYear=this.datePickerCalendar.querySelector(".calendar-year"),this.datePickerCalendarNavDay=this.datePickerCalendar.querySelector(".calendar-day"),this.datePickerCalendarNavPreviousMonth=this.datePickerCalendarNav.querySelector(".calendar-nav-previous-month"),this.datePickerCalendarNavNextMonth=this.datePickerCalendarNav.querySelector(".calendar-nav-next-month"),this.datePickerCalendarNavPreviousYear=this.datePickerCalendarNav.querySelector(".calendar-nav-previous-year"),this.datePickerCalendarNavNextYear=this.datePickerCalendarNav.querySelector(".calendar-nav-next-year"),this.datePickerCalendarHeader=this.datePickerCalendar.querySelector(".calendar-header"),this.datePickerCalendarBody=this.datePickerCalendar.querySelector(".calendar-body")}},{key:"_bindEvents",value:function(){var e=this;this.element.addEventListener(this._clickEvent,function(t){t.preventDefault(),e.open?e.hide():e.show()}),this.options.overlay&&(this.datePickerCloseButton&&this.datePickerCloseButton.addEventListener(this._clickEvent,function(t){t.preventDefault(),e.hide()}),this.options.closeOnOverlayClick&&this.datePickerOverlay.addEventListener(this._clickEvent,function(t){t.preventDefault(),e.hide()})),this.datePickerCalendarNavPreviousYear.addEventListener(this._clickEvent,function(t){t.preventDefault(),e.prevYear()}),this.datePickerCalendarNavNextYear.addEventListener(this._clickEvent,function(t){t.preventDefault(),e.nextYear()}),this.datePickerCalendarNavPreviousMonth.addEventListener(this._clickEvent,function(t){t.preventDefault(),e.prevMonth()}),this.datePickerCalendarNavNextMonth.addEventListener(this._clickEvent,function(t){t.preventDefault(),e.nextMonth()})}},{key:"_bindDaysEvents",value:function(){var e=this;[].forEach.call(this.datePickerCalendarDays,function(t){t.addEventListener(e._clickEvent,function(t){t.preventDefault(),void 0!==e.options.onSelect&&null!=e.options.onSelect&&e.options.onSelect&&e.options.onSelect(new Date(year,month,day));var a=t.currentTarget.dataset.date.split("-");e.element.value=e._getFormatedDate(new Date(a[0],a[1],a[2]),e.options.dateFormat),e.options.closeOnSelect&&e.hide()})})}},{key:"_getDayName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(e+=datepicker_langs[this.options.lang].weekStart;e>=7;)e-=7;return t?datepicker_langs[this.options.lang].weekdaysShort[e]:datepicker_langs[this.options.lang].weekdays[e]}},{key:"_renderDay",value:function(e,t,a,n,i,r,o,s,d,l){return'\n      <div data-date="'.concat("".concat(a,"-").concat(t,"-").concat(e),'" class="calendar-date',r?" is-disabled":"").concat(s?" calendar-range":"").concat(d?" calendar-range-start":"").concat(l?" calendar-range-end":"",'">\n        <button class="date-item').concat(i?" is-today":"").concat(n?" is-active":"",'">').concat(e,"</button>\n      </div>\n    ")}},{key:"_renderDays",value:function(){var e=new Date,t="",a=this._getDaysInMonth(this.year,this.month),n=new Date(this.year,this.month,1).getDay();void 0!==this.options.onRender&&null!=this.options.onRender&&this.options.onRender&&this.options.onRender(this),datepicker_langs[this.options.lang].weekStart>0&&(n-=datepicker_langs[this.options.lang].weekStart)<0&&(n+=7);for(var i=a+n,r=i;r>7;)r-=7;i+=7-r;for(var o=0;o<i;o++){var s=new Date(this.year,this.month,o-n+1),d=this._compareDates(s,this.options.startDate),l=!1,c=!1,h=this._compareDates(s,e),u=o<n||o>=a+n,v=!1;d||(l=!1,c=!1),s.getMonth()!==this.month&&(v=!0),t+=this._renderDay(s.getDate(),this.month,this.year,d,h,v,u,!1,l,c)}this.datePickerCalendarBody.insertAdjacentHTML("beforeend",t),this.datePickerCalendarDays=this.datePickerCalendarBody.querySelectorAll(".calendar-date"),this._bindDaysEvents()}},{key:"prevMonth",value:function(){this.month-=1,this._adjustCalendar()}},{key:"nextMonth",value:function(){this.month+=1,this._adjustCalendar()}},{key:"prevYear",value:function(){this.year-=1,this._adjustCalendar()}},{key:"nextYear",value:function(){this.year+=1,this._adjustCalendar()}},{key:"show",value:function(){this.element.value&&(this.options.startDate=new Date(this.element.value)),this.month=this.options.startDate.getMonth(),this.year=this.options.startDate.getFullYear(),this.day=this.options.startDate.getDate(),this._adjustCalendar(),void 0!==this.options.onOpen&&null!=this.options.onOpen&&this.options.onOpen&&this.options.onOpen(this),this.datePickerContainer.classList.add("is-active"),this.options.overlay||this._adjustPosition(),this.open=!0}},{key:"hide",value:function(){this.open=!1,void 0!==this.options.onClose&&null!=this.options.onClose&&this.options.onClose&&this.options.onClose(this),this.datePickerContainer.classList.remove("is-active")}},{key:"_adjustCalendar",value:function(){return this.month<0&&(this.year-=Math.ceil(Math.abs(this.month)/12),this.month+=12),this.month>11&&(this.year+=Math.floor(Math.abs(this.month)/12),this.month-=12),this.datePickerCalendarNavMonth.innerHTML=datepicker_langs[this.options.lang].months[this.month],this.datePickerCalendarNavYear.innerHTML=this.year,this.datePickerCalendarNavDay.innerHTML=this.day,this.datePickerCalendarBody.innerHTML="",this._renderDays(),this}},{key:"_adjustPosition",value:function(){var e,t,a;this.datePickerCalendar.offsetWidth,this.datePickerCalendar.offsetHeight,window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight,window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;if("function"==typeof this.element.getBoundingClientRect)e=(a=this.element.getBoundingClientRect()).left+window.pageXOffset,t=a.bottom+window.pageYOffset;else for(e=this.element.offsetLeft,t=this.element.offsetTop+this.element.offsetHeight;this.element=this.element.offsetParent;)e+=this.element.offsetLeft,t+=this.element.offsetTop;this.datePickerCalendar.style.position="absolute",this.datePickerCalendar.style.left=e+"px",this.datePickerCalendar.style.top=t+"px"}},{key:"destroy",value:function(){this.datePickerCalendar.remove()}},{key:"_getFormatedDate",value:function(e,t){var a={d:e.getDate(),dd:e.getDate(),D:e.getDay(),m:e.getMonth()+1,mm:e.getMonth()+1,M:e.getMonth(),MM:e.getMonth(),yy:e.getFullYear().toString().substr(-2),yyyy:e.getFullYear()};return a.dd<10&&(a.dd="0"+a.dd),a.mm<10&&(a.mm="0"+a.mm),a.D=datepicker_langs[this.options.lang].weekdays[a.D?a.D-1:6],a.M=datepicker_langs[this.options.lang].monthsShort[a.M],a.MM=datepicker_langs[this.options.lang].months[a.MM],t.replace(/(?:[dmM]{1,2}|D|yyyy|yy)/g,function(e){return void 0!==a[e]?a[e]:e})}},{key:"_isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"_getDaysInMonth",value:function(e,t){return[31,this._isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_compareDates",value:function(e,t){return e.setHours(0,0,0,0),t.setHours(0,0,0,0),e.getTime()===t.getTime()}}]),e}();exports.default=DatePicker;