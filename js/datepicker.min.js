"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),datepicker_langs={en:{weekStart:1,previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},fr:{weekStart:1,previousMonth:"Mois précédent",nextMonth:"Mois suivant",months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Auo","Sep","Oct","Nov","Déc"],weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},de:{weekStart:1,previousMonth:"Vorheriger Monat",nextMonth:"Nächster Monat",months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Febr","März","Apr","Mai","Juni","Juli","Aug","Sept","Okt","Nov","Dez"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],weekdaysShort:["So","Mo","Di","Mi","Do","Fr","Sa"]}},DatePicker=function(){function e(t,n){_classCallCheck(this,e),n||(n={});var a={startDate:new Date,dataFormat:"yyyy/mm/dd",lang:"en",overlay:!1,closeOnSelect:!0,onSelect:null,onOpen:null,onClose:null,onRender:null};if(this.element="string"==typeof t?document.querySelector(t):t,!this.element)throw new Error("An invalid selector or non-DOM node has been provided.");this.parent=this.element.parentElement,this.lang="undefined"!=typeof datepicker_langs[this.lang]?this.lang:"en",this.options=Object.assign({},a,n),this.month=this.options.startDate.getMonth(),this.year=this.options.startDate.getFullYear(),this.open=!1,this.build()}return _createClass(e,[{key:"build",value:function(){var e=this;if(this.datePickerContainer=document.createElement("div"),this.datePickerContainer.id="datePicker"+(new Date).getTime(),this.options.overlay&&this.datePickerContainer.classList.add("modal"),this.datePickerContainer.classList.add("datepicker"),this.calendarContainer=document.createElement("div"),this.calendarContainer.id="datePicker"+(new Date).getTime(),this.calendarContainer.classList.add("calendar"),this.renderCalendar(),this.options.overlay){var t=document.createElement("div");t.classList.add("modal-background"),this.datePickerContainer.appendChild(t)}var n=document.createElement("button");n.className="modal-close",n.addEventListener("click",function(t){t.preventDefault(),e.datePickerContainer.classList.remove("is-active")}),this.datePickerContainer.appendChild(this.calendarContainer),this.datePickerContainer.appendChild(n),document.body.appendChild(this.datePickerContainer),this.element.addEventListener("click",function(t){t.preventDefault(),e.open?(e.hide(),e.open=!1):(e.show(),e.open=!0)})}},{key:"renderDayName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;for(e+=datepicker_langs[this.options.lang].weekStart;e>=7;)e-=7;return t?datepicker_langs[this.options.lang].weekdaysShort[e]:datepicker_langs[this.options.lang].weekdays[e]}},{key:"renderDay",value:function(e,t,n,a,i,s,o,r,d,l){var h=this,c=document.createElement("div"),u=document.createElement("button");return u.classList.add("date-item"),u.innerHTML=e,u.addEventListener("click",function(a){"undefined"!=typeof h.options.onSelect&&null!=h.options.onSelect&&h.options.onSelect&&h.options.onSelect(new Date(n,t,e)),h.element.value=h.getFormatedDate(new Date(n,t,e),h.options.dataFormat),h.options.closeOnSelect&&h.hide()}),c.classList.add("calendar-date"),c.appendChild(u),s&&c.setAttribute("disabled","disabled"),i&&c.classList.add("is-today"),a&&c.classList.add("is-active"),r&&c.classList.add("calendar-range"),d&&c.classList.add("range-start"),l&&c.classList.add("range-end"),c}},{key:"renderNav",value:function(e,t){var n=this,a=document.createElement("div");a.classList.add("calendar-nav");var i=document.createElement("div");i.classList.add("calendar-nav-left"),this.previousYearButton=document.createElement("div"),this.previousYearButton.classList.add("button"),this.previousYearButton.classList.add("is-text");var s=document.createElement("i");s.classList.add("fa"),s.classList.add("fa-backward"),this.previousYearButton.appendChild(s),this.previousYearButton.addEventListener("click",function(e){e.preventDefault(),n.prevYear()}),i.appendChild(this.previousYearButton),this.previousMonthButton=document.createElement("div"),this.previousMonthButton.classList.add("button"),this.previousMonthButton.classList.add("is-text");var o=document.createElement("i");o.classList.add("fa"),o.classList.add("fa-chevron-left"),this.previousMonthButton.appendChild(o),this.previousMonthButton.addEventListener("click",function(e){e.preventDefault(),n.prevMonth()}),i.appendChild(this.previousMonthButton);var r=document.createElement("div");r.innerHTML=datepicker_langs[this.options.lang].months[t]+" "+e;var d=document.createElement("div");d.classList.add("calendar-nav-right"),this.nextMonthButton=document.createElement("div"),this.nextMonthButton.classList.add("button"),this.nextMonthButton.classList.add("is-text");var l=document.createElement("i");l.classList.add("fa"),l.classList.add("fa-chevron-right"),this.nextMonthButton.appendChild(l),this.nextMonthButton.addEventListener("click",function(e){e.preventDefault(),n.nextMonth()}),d.appendChild(this.nextMonthButton),this.nextYearButton=document.createElement("div"),this.nextYearButton.classList.add("button"),this.nextYearButton.classList.add("is-text");var h=document.createElement("i");return h.classList.add("fa"),h.classList.add("fa-forward"),this.nextYearButton.appendChild(h),this.nextYearButton.addEventListener("click",function(e){e.preventDefault(),n.nextYear()}),d.appendChild(this.nextYearButton),a.appendChild(i),a.appendChild(r),a.appendChild(d),a}},{key:"renderHeader",value:function(){var e=document.createElement("div");e.classList.add("calendar-header");for(var t=0;7>t;t++){var n=document.createElement("div");n.classList.add("calendar-date"),n.innerHTML=this.renderDayName(t,!0),e.appendChild(n)}return e}},{key:"renderBody",value:function(){var e=document.createElement("div");return e.classList.add("calendar-body"),e}},{key:"renderCalendar",value:function(){var e=new Date,t=this.renderNav(this.year,this.month),n=this.renderHeader(),a=this.renderBody();this.calendarContainer.appendChild(t),this.calendarContainer.appendChild(n),this.calendarContainer.appendChild(a);var i=this.getDaysInMonth(this.year,this.month),s=new Date(this.year,this.month,1).getDay();"undefined"!=typeof this.options.onRender&&null!=this.options.onRender&&this.options.onRender&&this.options.onRender(this),datepicker_langs[this.options.lang].weekStart>0&&(s-=datepicker_langs[this.options.lang].weekStart,0>s&&(s+=7));for(var o=i+s,r=o;r>7;)r-=7;o+=7-r;for(var d=0;o>d;d++){var l=new Date(this.year,this.month,1+(d-s)),h=!1,c=!1,u=!1,p=!1,m=this.compareDates(l,e),v=s>d||d>=i+s,f=!1;c||(u=!1,p=!1),l.getMonth()!==this.month&&(f=!0),a.appendChild(this.renderDay(l.getDate(),this.month,this.year,c,m,f,v,h,u,p))}}},{key:"prevMonth",value:function(){this.month-=1,this.adjustCalendar(),this.renderCalendar()}},{key:"nextMonth",value:function(){this.month+=1,this.adjustCalendar(),this.renderCalendar()}},{key:"prevYear",value:function(){this.year-=1,this.adjustCalendar(),this.renderCalendar()}},{key:"nextYear",value:function(){this.year+=1,this.adjustCalendar(),this.renderCalendar()}},{key:"show",value:function(){"undefined"!=typeof this.options.onOpen&&null!=this.options.onOpen&&this.options.onOpen&&this.options.onOpen(this),this.datePickerContainer.classList.add("is-active"),this.options.overlay||this.adjustPosition(),this.open=!0}},{key:"hide",value:function(){this.open=!1,"undefined"!=typeof this.options.onClose&&null!=this.options.onClose&&this.options.onClose&&this.options.onClose(this),this.datePickerContainer.classList.remove("is-active")}},{key:"adjustCalendar",value:function(){return this.month<0&&(this.year-=Math.ceil(Math.abs(this.month)/12),this.month+=12),this.month>11&&(this.year+=Math.floor(Math.abs(this.month)/12),this.month-=12),this.calendarContainer.innerHTML="",this}},{key:"adjustPosition",value:function(){var e,t,n;this.calendarContainer.offsetWidth,this.calendarContainer.offsetHeight,window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight,window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;if("function"==typeof this.element.getBoundingClientRect)n=this.element.getBoundingClientRect(),e=n.left+window.pageXOffset,t=n.bottom+window.pageYOffset;else for(e=this.element.offsetLeft,t=this.element.offsetTop+this.element.offsetHeight;this.element=this.element.offsetParent;)e+=this.element.offsetLeft,t+=this.element.offsetTop;this.calendarContainer.style.position="absolute",this.calendarContainer.style.left=e+"px",this.calendarContainer.style.top=t+"px"}},{key:"destroy",value:function(){this.calendarContainer.remove()}},{key:"getFormatedDate",value:function(e,t){var n={d:e.getDate(),dd:e.getDate(),D:e.getDay(),m:e.getMonth()+1,mm:e.getMonth()+1,M:e.getMonth(),MM:e.getMonth(),yy:e.getFullYear().toString().substr(-2),yyyy:e.getFullYear()};return n.dd<10&&(n.dd="0"+n.dd),n.mm<10&&(n.mm="0"+n.mm),n.D=datepicker_langs[this.options.lang].weekdays[n.D?n.D-1:6],n.M=datepicker_langs[this.options.lang].monthsShort[n.M],n.MM=datepicker_langs[this.options.lang].months[n.MM],t.replace(/(?:[dmM]{1,2}|D|yyyy|yy)/g,function(e){return"undefined"!=typeof n[e]?n[e]:e})}},{key:"isActive",value:function(){return this.calendarContainer.classList.contains("is-active")}},{key:"isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"isLeapYear",value:function(e){return e%4===0&&e%100!==0||e%400===0}},{key:"getDaysInMonth",value:function(e,t){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"compareDates",value:function(e,t){return e.getTime()===t.getTime()}}]),e}();
